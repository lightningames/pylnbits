
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.1, mkdocs-material-8.5.7">
    
    
      
        <title>How-To guides - Pylnbits Docs</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.20d9efc8.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.cbb835fc.min.css">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#how-to-guides" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Pylnbits Docs" class="md-header__button md-logo" aria-label="Pylnbits Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Pylnbits Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              How-To guides
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Pylnbits Docs" class="md-nav__button md-logo" aria-label="Pylnbits Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Pylnbits Docs
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Pylnbits Docs
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          How-To guides
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        How-To guides
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#getting-started" class="md-nav__link">
    Getting Started
  </a>
  
    <nav class="md-nav" aria-label="Getting Started">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#install-from-source" class="md-nav__link">
    Install from source
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#release-note" class="md-nav__link">
    Release Note
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pypi-release" class="md-nav__link">
    PyPi release
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#set-up-your-config" class="md-nav__link">
    Set up your Config
  </a>
  
    <nav class="md-nav" aria-label="Set up your Config">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configyml" class="md-nav__link">
    config.yml
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example-code" class="md-nav__link">
    Example Code
  </a>
  
    <nav class="md-nav" aria-label="Example Code">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sample-code-for-user-wallet" class="md-nav__link">
    Sample code for user wallet
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#expand-the-tabs-for-more-lnbits-api-info" class="md-nav__link">
    Expand the tabs for more LNBits API info
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sample-code-for-lnurlp" class="md-nav__link">
    Sample code for LNURLp
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#more-examples" class="md-nav__link">
    More Examples
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../reference/" class="md-nav__link">
        Reference
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../explanation/" class="md-nav__link">
        Explanation
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../notes/" class="md-nav__link">
        MK Docs
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#getting-started" class="md-nav__link">
    Getting Started
  </a>
  
    <nav class="md-nav" aria-label="Getting Started">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#install-from-source" class="md-nav__link">
    Install from source
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#release-note" class="md-nav__link">
    Release Note
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pypi-release" class="md-nav__link">
    PyPi release
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#set-up-your-config" class="md-nav__link">
    Set up your Config
  </a>
  
    <nav class="md-nav" aria-label="Set up your Config">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configyml" class="md-nav__link">
    config.yml
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example-code" class="md-nav__link">
    Example Code
  </a>
  
    <nav class="md-nav" aria-label="Example Code">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sample-code-for-user-wallet" class="md-nav__link">
    Sample code for user wallet
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#expand-the-tabs-for-more-lnbits-api-info" class="md-nav__link">
    Expand the tabs for more LNBits API info
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sample-code-for-lnurlp" class="md-nav__link">
    Sample code for LNURLp
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#more-examples" class="md-nav__link">
    More Examples
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="how-to-guides">How To Guides</h1>
<p>This is a brief guide on how to use the pylnbits library. First create an an account on your LNBits instance by visiting the main page and naming your wallet. Be sure to bookmark the link to be able to get access in the future. If you are not familiar with LNBits, please take the time to familiarize yourself with how user accounts work and how invoices are created and paid on LNBits first. </p>
<p>Next, click on <code>enable extensions</code> in the side navigation bar on your LNBits account. Enable the extensions that you want to use. Extension use is <em>optional</em>, and is not required for generating invoices or receiving payments. The <strong>pylnbits</strong> library currently only supports the following extensions from <a href="https://lnbits.com">LNBits</a>: </p>
<ul>
<li>User Wallet </li>
<li>User Manager</li>
<li>LNURLp</li>
<li>LNURLw</li>
<li>LndHub</li>
</ul>
<h2 id="getting-started">Getting Started</h2>
<p>Use version at least <strong>python3.8</strong></p>
<h3 id="install-from-source">Install from source</h3>
<pre><code>git clone https://github.com/lightningames/pylnbits
cd pylnbits
python3 -m venv venv
source venv/bin/activate
pip install -r requirements.txt
pip install -e .
</code></pre>
<h3 id="release-note">Release Note</h3>
<p>current pylnbits release is 0.0.3
It is only effective up to LNBITS commit 
<a href="https://github.com/lnbits/lnbits-legend/commit/e46e881663eb4d70b691e09ac1c97eecd6b547b8">https://github.com/lnbits/lnbits-legend/commit/e46e881663eb4d70b691e09ac1c97eecd6b547b8
</a></p>
<h3 id="pypi-release">PyPi release</h3>
<p><a href="https://pypi.org/project/pylnbits/">https://pypi.org/project/pylnbits/</a></p>
<pre><code>pip install pylnbits
</code></pre>
<h2 id="set-up-your-config">Set up your Config</h2>
<p>In your LNBits account, click on the API info tab. You should see <strong>Wallet ID, Admin Key and Invoice/read key</strong>. </p>
<p><img alt="LNBits user dashboard" src="../images/lnbits.png" /></p>
<p>First create a <code>config.yml</code> file, copy the Keys from LNBits with your values. There is a sample <code>config_sample.yml</code> file in the pylnbits source directory.</p>
<h3 id="configyml"><code>config.yml</code></h3>
<pre><code>lnbits_url: &quot;https://&lt;your lnbits domain here&gt;&quot;

# api_key from LNbits User Manager Extension
in_key: &quot;&lt;your Invoice Key here&gt;&quot; 
admin_key: &quot;&lt; Your Admin Key here&gt;&quot;
</code></pre>
<h2 id="example-code">Example Code</h2>
<h3 id="sample-code-for-user-wallet">Sample code for user wallet</h3>
<p>The following is sample code that uses config.yml in your current directory for calling methods from the LNURLp extension. </p>
<p>This Example code runs test for the following: </p>
<ul>
<li>INITIALIZE the pylnbits with your config file</li>
<li>GET wallet details</li>
<li>CHECK an invoice payment hash</li>
<li>CREATE an invoice</li>
<li>PAY an invoice (Bolt11)</li>
</ul>
<p>Replace the sample data with your data, e.g. bolt and payment_hash variables</p>
<pre><code>import asyncio

from aiohttp.client import ClientSession

from pylnbits.config import Config
from pylnbits.user_wallet import UserWallet

async def main():

    # INITIALIZE the pylnbits with your config file
    c = Config(config_file=&quot;config.yml&quot;)
    url = c.lnbits_url
    print(f&quot;url: {url}&quot;)
    print(f&quot;headers: {c.headers()}&quot;)
    print(f&quot;admin_headers: {c.admin_headers()}&quot;)


    async with ClientSession() as session:
        # GET wallet details
        uw = UserWallet(c, session)
        userwallet = await uw.get_wallet_details()
        print(f&quot;user wallet info : {userwallet}&quot;)

        # CHECK an invoice payment hash
        payment_hash = &quot;edefef3766537446c70e51af9b414fb3b319baf515f1ff9852c0289eae3665a1&quot;
        res = await uw.check_invoice(payment_hash)
        print(f&quot;check invoice response: {res}&quot;)

        # CREATE an invoice
        res = await uw.create_invoice(False, 150, &quot;testcreatetwo&quot;, &quot;http://google.com&quot;)
        print(f'\nCreate invoice RESPONSE: {res}\n\n')

        # PAY an invoice - add balance and check
        # replace the bolt below with your bolt11
        bolt = &quot;lnbc800n1ps23r2dpp5ahh77dmx2d6yd3cw2xheks20kwe3nwh4zhcllxzjcq5fat3kvkssdqsd9h8vmmfvdjk7mn9cqzpgrzjq02snzwz4petaly54yzjkm358rqa5as9hkgydjvxxmvlpuk6dfd9cz0y2cqq0qsqqyqqqqlgqqqqqqgq9qsp5cut63ftfcffwkrr2w9r50w5e40m93k3er75mc70ysxps7yercs9s9qyyssqs7qk3cz97nm5m6ehzedcxhttx87l7x5kk38gvwkzzv4lhrhddtqq3sk43nnvsddagf36ledw9vhlpqxuu5s53pj6sz926mwqxf8chsgp2m9j8w&quot;  # noqa
        body = {&quot;out&quot;: True, &quot;bolt11&quot;: bolt}
        res = await uw.pay_invoice(True, bolt)
        print(res)


loop = asyncio.get_event_loop()
loop.run_until_complete(main())

</code></pre>
<p>For more details on what values need to be passed in for the methods, check the LNBits API docs, which should be located on the LNBits site below your LNBits Admin and Invoice Key.</p>
<h3 id="expand-the-tabs-for-more-lnbits-api-info">Expand the tabs for more LNBits API info</h3>
<p><img alt="API Info on LNBits" src="../images/API_info.png" /></p>
<h3 id="sample-code-for-lnurlp">Sample code for LNURLp</h3>
<p>The following is sample code that uses config.yml in your current directory for calling methods from the LNURLp extension</p>
<pre><code># test lnurlp pay link
import asyncio

from aiohttp.client import ClientSession

from pylnbits.config import Config
from pylnbits.lnurl_p import LnurlPay

# Example code for testing LNURLp

async def main():
    c = Config(config_file=&quot;config.yml&quot;)
    url = c.lnbits_url
    print(f&quot;url: {url}&quot;)
    print(f&quot;headers: {c.headers()}&quot;)
    print(f&quot;admin_headers: {c.admin_headers()}&quot;)

    async with ClientSession() as session:
        lw = LnurlPay(c, session)

        # list links        
        links = await lw.list_paylinks()
        print(&quot;list all links: &quot; , str(links), &quot;\n\n&quot;)

        # get pay link 
        pay_id = links[0]['id']
        print(f'pay_id for get_link: {pay_id}')
        getlink = await lw.get_paylink(pay_id=str(pay_id))
        print(&quot;get pay link: &quot;, str(getlink), &quot;\n&quot;)

        # create pay link
        body = {&quot;description&quot;: &quot;auto pay link&quot;,
                &quot;amount&quot;: 100,
                &quot;max&quot;: 10000,
                &quot;min&quot;: 100,
                &quot;comment_chars&quot;: 100}

        newlink = await lw.create_paylink(body=body)
        print(f&quot;create pay link with body: {body}, result link: {newlink} \n&quot;)
        pay_id = newlink['id']

        # update newly created link above
        # all body fields are required
        body = {&quot;description&quot;: &quot;update auto paylink&quot;,
                &quot;amount&quot;: 150, 
                &quot;max&quot;: 10000,
                &quot;min&quot;: 100,
                &quot;comment_chars&quot;: 100}
        update_result = await lw.update_paylink(pay_id=str(pay_id), body=body)
        print(f'update pay link with intial id: {pay_id}, body: {body} \n result: {update_result}\n\n')

        # delete above created link
        delete_result = await lw.delete_paylink(pay_id=str(pay_id))
        print(f'delete pay link id: {pay_id}, result: {delete_result}\n\n')



loop = asyncio.get_event_loop()
loop.run_until_complete(main())

</code></pre>
<h2 id="more-examples">More Examples</h2>
<p>More example code can be found in the <strong>tests</strong> directory as shown in the <a href="/#project-layout">Project Layout</a> section. </p>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href=".." class="md-footer__link md-footer__link--prev" aria-label="Previous: Pylnbits Docs" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Pylnbits Docs
            </div>
          </div>
        </a>
      
      
        
        <a href="../reference/" class="md-footer__link md-footer__link--next" aria-label="Next: Reference" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Reference
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.8492ddcf.min.js"></script>
      
    
  </body>
</html>