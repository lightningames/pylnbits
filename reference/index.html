<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="bitkarrot" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Reference - Pylnbits Docs</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
        <link href="../assets/_mkdocstrings.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Reference";
        var mkdocs_page_input_path = "reference.md";
        var mkdocs_page_url = null;
      </script>
    
    <script src="../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/languages/python.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> Pylnbits Docs
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Pylnbits Docs</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../how-to-guides/">How-To guides</a>
                </li>
              </ul>
              <ul class="current">
                <li class="toctree-l1 current"><a class="reference internal current" href="./">Reference</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#pylnbits">pylnbits</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#pylnbits.config">pylnbits.config</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#pylnbits.user_wallet">pylnbits.user_wallet</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#pylnbits.user_wallet.UserWallet">UserWallet</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#pylnbits.user_wallet.UserWallet.config">config</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pylnbits.user_wallet.UserWallet.__init__">__init__()</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pylnbits.user_wallet.UserWallet.check_invoice">check_invoice()</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pylnbits.user_wallet.UserWallet.create_invoice">create_invoice()</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pylnbits.user_wallet.UserWallet.get_bolt11">get_bolt11()</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pylnbits.user_wallet.UserWallet.get_decoded">get_decoded()</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pylnbits.user_wallet.UserWallet.get_invoices">get_invoices()</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pylnbits.user_wallet.UserWallet.get_invoicesbymemo">get_invoicesbymemo()</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pylnbits.user_wallet.UserWallet.get_payhash">get_payhash()</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pylnbits.user_wallet.UserWallet.get_payurl">get_payurl()</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pylnbits.user_wallet.UserWallet.get_wallet_details">get_wallet_details()</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pylnbits.user_wallet.UserWallet.pay_invoice">pay_invoice()</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#pylnbits.user_manager">pylnbits.user_manager</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#pylnbits.user_manager.UserManager">UserManager</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#pylnbits.user_manager.UserManager.__init__">__init__()</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pylnbits.user_manager.UserManager.delete_user">delete_user()</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pylnbits.user_manager.UserManager.delete_wallet">delete_wallet()</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pylnbits.user_manager.UserManager.get_tx">get_tx()</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pylnbits.user_manager.UserManager.get_user">get_user()</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pylnbits.user_manager.UserManager.get_users">get_users()</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pylnbits.user_manager.UserManager.get_wallets">get_wallets()</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pylnbits.user_manager.UserManager.post_activate_ext">post_activate_ext()</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pylnbits.user_manager.UserManager.post_user_initial">post_user_initial()</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pylnbits.user_manager.UserManager.post_wallet">post_wallet()</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#pylnbits.lnurl_p">pylnbits.lnurl_p</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#pylnbits.lnurl_p.LnurlPay">LnurlPay</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#pylnbits.lnurl_p.LnurlPay.create_paylink">create_paylink()</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pylnbits.lnurl_p.LnurlPay.delete_paylink">delete_paylink()</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pylnbits.lnurl_p.LnurlPay.get_paylink">get_paylink()</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pylnbits.lnurl_p.LnurlPay.list_paylinks">list_paylinks()</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pylnbits.lnurl_p.LnurlPay.update_paylink">update_paylink()</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#pylnbits.lnurl_w">pylnbits.lnurl_w</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#pylnbits.lnurl_w.LnurlWithdraw">LnurlWithdraw</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#pylnbits.lnurl_w.LnurlWithdraw.create_withdrawlink">create_withdrawlink()</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pylnbits.lnurl_w.LnurlWithdraw.delete_withdrawlink">delete_withdrawlink()</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pylnbits.lnurl_w.LnurlWithdraw.get_hash_check">get_hash_check()</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pylnbits.lnurl_w.LnurlWithdraw.get_image_embed">get_image_embed()</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pylnbits.lnurl_w.LnurlWithdraw.get_withdrawlink">get_withdrawlink()</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pylnbits.lnurl_w.LnurlWithdraw.list_withdrawlinks">list_withdrawlinks()</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pylnbits.lnurl_w.LnurlWithdraw.update_withdrawlink">update_withdrawlink()</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#pylnbits.lndhub">pylnbits.lndhub</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#pylnbits.lndhub.LndHub">LndHub</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#pylnbits.lndhub.LndHub.__init__">__init__()</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pylnbits.lndhub.LndHub.admin">admin()</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pylnbits.lndhub.LndHub.invoice">invoice()</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#project-layout">Project layout</a>
    </li>
    </ul>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../explanation/">Explanation</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">Pylnbits Docs</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a> &raquo;</li>
      <li>Reference</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/lightningames/pylnbits/blob/main/docs/reference.md" class="icon icon-github"> Edit on GitHub</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="reference">Reference</h1>
<p>This part of the project documentation focuses on
an <strong>information-oriented</strong> approach. Use it as a
reference for the technical implementation of the
<code>pylnbits</code> project code.</p>


<div class="doc doc-object doc-module">


<a id="pylnbits"></a>
  <div class="doc doc-contents first">
  
      <p>Modules exported by this package:</p>
<ul>
<li><code>config.py</code>: where you set the LNBits user API keys for your instance of the pylnbits library</li>
<li><code>user_wallet.py</code>: handles Rest API methods for LNbits User Wallet (lnbits page where users can enable extensions)<ul>
<li>Get wallet details</li>
<li>Create an invoice (incoming)</li>
<li>Pay an invoice (outgoing)</li>
<li>Check an invoice (incoming or outgoing)</li>
<li>Decode an invoice (new)</li>
<li>Get invoices (incoming or outgoing) (new) </li>
<li>Get invoice(s) by memo (incoming or outgoing (new) </li>
</ul>
</li>
<li>
<p><code>user_manager.py</code>: For managing multiple users on LNBits, calls Rest API methods from LNbits User Manager Extension</p>
<ul>
<li>GET users</li>
<li>GET user (single user)</li>
<li>GET wallets</li>
<li>GET transactions</li>
<li>POST wallet</li>
<li>POST user + initial wallet </li>
<li>DELETE user and their wallets</li>
<li>DELETE wallet</li>
<li>POST activate extension</li>
</ul>
</li>
<li>
<p><code>lnurl_p.py</code>: For creating and managing LNURLp links, calls Rest API methods for LNbits LNURLp Pay Extension</p>
<ul>
<li>List pay links</li>
<li>Get a pay link</li>
<li>Create a pay link</li>
<li>Update a pay link</li>
<li>Delete a pay link</li>
</ul>
</li>
<li>
<p><code>lnurl_w.py</code>: For creating and managing LNURLw links, handles Rest API methods for LNbits LNURLw Withdraw Extension:</p>
<ul>
<li>List withdraw links </li>
<li>Get a withdraw link </li>
<li>Create a withdraw link </li>
<li>Update a withdraw link </li>
<li>Delete a withdraw link </li>
<li>Get hash check </li>
<li>Get image to embed</li>
</ul>
</li>
<li>
<p><code>lndhub.py</code>: for fetching admin and invoice lndhub urls</p>
</li>
</ul>

  

  <div class="doc doc-children">











  </div>

  </div>

</div>

<div class="doc doc-object doc-module">


<a id="pylnbits.config"></a>
  <div class="doc doc-contents first">

  

  <div class="doc doc-children">











  </div>

  </div>

</div>

<div class="doc doc-object doc-module">


<a id="pylnbits.user_wallet"></a>
  <div class="doc doc-contents first">

  

  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="pylnbits.user_wallet.UserWallet" class="doc doc-heading">
        <code>UserWallet</code>


</h2>


  <div class="doc doc-contents ">



        <details class="quote">
          <summary>Source code in <code>pylnbits/user_wallet.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">UserWallet</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">,</span> <span class="n">session</span><span class="p">:</span> <span class="n">ClientSession</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;__init__</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_session</span> <span class="o">=</span> <span class="n">session</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_config</span> <span class="o">=</span> <span class="n">config</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_invoice_headers</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">invoice_headers</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_admin_headers</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">admin_headers</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_lnbits_url</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">lnbits_url</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">paypath</span> <span class="o">=</span> <span class="s2">&quot;/api/v1/payments&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">walletpath</span> <span class="o">=</span> <span class="s2">&quot;/api/v1/wallet&quot;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">config</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;config property</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">get_wallet_details</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        GET /api/v1/wallet</span>

<span class="sd">        Headers</span>
<span class="sd">        {&quot;X-Api-Key&quot;: &quot;Invoice key&quot;}</span>

<span class="sd">        Returns 200 OK (application/json)</span>
<span class="sd">        {&quot;id&quot;: &lt;string&gt;, &quot;name&quot;: &lt;string&gt;, &quot;balance&quot;: &lt;int&gt;}</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># upath = &quot;/api/v1/wallet&quot;</span>
            <span class="n">upath</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">walletpath</span>
            <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lnbits_url</span> <span class="o">+</span> <span class="n">upath</span>
            <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">get_url</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_invoice_headers</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">res</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">e</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">check_invoice</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">hash</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Check an invoice (incoming or outgoing)</span>

<span class="sd">        GET /api/v1/payments/&lt;payment_hash&gt;</span>

<span class="sd">        Headers: invoice key</span>

<span class="sd">        Returns 200 OK (application/json)</span>
<span class="sd">        {&quot;paid&quot;: &lt;bool&gt;}</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># ppath = &quot;/api/v1/payments/&quot;</span>
            <span class="n">upath</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">paypath</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">hash</span>
            <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lnbits_url</span> <span class="o">+</span> <span class="n">upath</span>
            <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">get_url</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_invoice_headers</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">res</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">e</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">create_invoice</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">direction</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span> <span class="n">amt</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">memo</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">webhook</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create an invoice(incoming)</span>

<span class="sd">        POST /api/v1/payments</span>

<span class="sd">        Headers</span>
<span class="sd">        {&quot;X-Api-Key&quot;: &quot;Invoice Key&quot;}</span>

<span class="sd">        Body (application/json)</span>
<span class="sd">        {&quot;out&quot;: false, &quot;amount&quot;: &lt;int&gt;, &quot;memo&quot;: &lt;string&gt;}</span>

<span class="sd">        Returns 201 CREATED (application/json)</span>
<span class="sd">        {&quot;payment_hash&quot;: &lt;string&gt;, &quot;payment_request&quot;: &lt;string&gt;}</span>

<span class="sd">        curl -X POST https://bits.bitcoin.org.hk/api/v1/payments</span>
<span class="sd">        -d &#39;{&quot;out&quot;: false, &quot;amount&quot;: 100, &quot;memo&quot;: &quot;poo&quot;, &quot;webhook&quot;: &quot;http://google.com&quot;}&#39;</span>
<span class="sd">        -H &quot;X-Api-Key: f7f740104bba47e9ac9bb3fa.......&quot;  # only needs Invoice/read key</span>
<span class="sd">        -H &quot;Content-type: application/json&quot;</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># upath = &quot;/api/v1/payments&quot;</span>
            <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lnbits_url</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">paypath</span>
            <span class="n">body</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;out&quot;</span><span class="p">:</span> <span class="n">direction</span><span class="p">,</span> <span class="s2">&quot;amount&quot;</span><span class="p">:</span> <span class="n">amt</span><span class="p">,</span> <span class="s2">&quot;memo&quot;</span><span class="p">:</span> <span class="n">memo</span><span class="p">,</span> <span class="s2">&quot;webhook&quot;</span><span class="p">:</span> <span class="n">webhook</span><span class="p">}</span>
            <span class="n">j</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">body</span><span class="p">)</span>
            <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">post_url</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_invoice_headers</span><span class="p">,</span> <span class="n">body</span><span class="o">=</span><span class="n">j</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">res</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">e</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">pay_invoice</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">direction</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span> <span class="n">bolt11</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Pay an invoice (outgoing)</span>

<span class="sd">        POST /api/v1/payments</span>

<span class="sd">        Headers</span>
<span class="sd">        {&quot;X-Api-Key&quot;: &quot;Admin key&quot;}</span>

<span class="sd">        Body (application/json)</span>
<span class="sd">        {&quot;out&quot;: true, &quot;bolt11&quot;: &lt;string&gt;}</span>

<span class="sd">        Returns 201 CREATED (application/json)</span>
<span class="sd">        {&quot;payment_hash&quot;: &lt;string&gt;}</span>

<span class="sd">        curl -X POST https://bits.bitcoin.org.hk/api/v1/payments</span>
<span class="sd">        -d &#39;{&quot;out&quot;: true, &quot;bolt11&quot;: &lt;string&gt;}&#39;</span>
<span class="sd">        -H &quot;X-Api-Key: b811bd2580a0431c96d3c4......&quot;  # TODO: needs admin key!</span>
<span class="sd">        -H &quot;Content-type: application/json&quot;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># upath = &quot;/api/v1/payments&quot;</span>
            <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lnbits_url</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">paypath</span>
            <span class="n">body</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;out&quot;</span><span class="p">:</span> <span class="n">direction</span><span class="p">,</span> <span class="s2">&quot;bolt11&quot;</span><span class="p">:</span> <span class="n">bolt11</span><span class="p">}</span>
            <span class="n">j</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">body</span><span class="p">)</span>
            <span class="c1">#  print(f&quot;body: {j}&quot;)</span>
            <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">post_url</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_admin_headers</span><span class="p">,</span> <span class="n">body</span><span class="o">=</span><span class="n">j</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">res</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">e</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">get_decoded</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bolt11</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        POST /api/v1/payments/decode</span>

<span class="sd">        Body (application/json)</span>
<span class="sd">        {&quot;data&quot;: &lt;string&gt;}</span>

<span class="sd">        Returns 200 (application/json)</span>

<span class="sd">        Headers: invoice key</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">decode_url</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lnbits_url</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">paypath</span> <span class="o">+</span> <span class="s2">&quot;/decode&quot;</span>
            <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="n">bolt11</span><span class="p">}</span>
            <span class="n">j</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">payload</span><span class="p">)</span>
            <span class="c1">#res =  requests.post(decode_url, json=payload, headers=self._invoice_headers)</span>
            <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">post_url</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="n">decode_url</span><span class="p">,</span> <span class="n">body</span><span class="o">=</span><span class="n">j</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_invoice_headers</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">res</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Exception in get_decoded() &quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">e</span>

    <span class="c1"># get payment hash from bolt11</span>
    <span class="k">async</span> <span class="k">def</span> <span class="nf">get_payhash</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bolt11</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Only returns the payment hash not entire decoded invoice</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">decoded</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_decoded</span><span class="p">(</span><span class="n">bolt11</span><span class="p">)</span>
        <span class="c1"># print(decoded)</span>
        <span class="k">if</span> <span class="s2">&quot;payment_hash&quot;</span> <span class="ow">in</span> <span class="n">decoded</span><span class="p">:</span>
            <span class="n">payhash</span> <span class="o">=</span> <span class="n">decoded</span><span class="p">[</span><span class="s2">&quot;payment_hash&quot;</span><span class="p">]</span>
            <span class="k">return</span> <span class="n">payhash</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">get_invoices</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get invoices (incoming or outgoing)</span>

<span class="sd">        GET /api/v1/payments</span>

<span class="sd">        Headers: invoice key</span>

<span class="sd">        Returns 200 OK (application/json)</span>
<span class="sd">        [{&lt;invoices&gt;}]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># ppath = &quot;/api/v1/payments/&quot;</span>
            <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lnbits_url</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">paypath</span>
            <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">get_url</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_invoice_headers</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">res</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">e</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">get_invoicesbymemo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">memo</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        GET /api/v1/payments?memo=&lt;memo&gt;</span>

<span class="sd">        Returns 200 OK (application/json)</span>
<span class="sd">        [{&lt;invoices&gt;}]</span>

<span class="sd">        Headers: invoice key</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lnbits_url</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">paypath</span> <span class="o">+</span> <span class="s2">&quot;?memo=&quot;</span> <span class="o">+</span> <span class="n">memo</span>
            <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">get_url</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_invoice_headers</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">res</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">e</span>

    <span class="c1"># from lnaddress</span>
    <span class="k">def</span> <span class="nf">get_payurl</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">email</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Construct Lnurlp link from email address provided.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">parts</span> <span class="o">=</span> <span class="n">email</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;@&quot;</span><span class="p">)</span>
            <span class="n">domain</span> <span class="o">=</span> <span class="n">parts</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">username</span> <span class="o">=</span> <span class="n">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">transform_url</span> <span class="o">=</span> <span class="s2">&quot;http://&quot;</span> <span class="o">+</span> <span class="n">domain</span> <span class="o">+</span> <span class="s2">&quot;/.well-known/lnurlp/&quot;</span> <span class="o">+</span> <span class="n">username</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Transformed URl: &quot;</span> <span class="o">+</span> <span class="n">transform_url</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">transform_url</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Exception, possibly malformed LN Address: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>

    <span class="c1"># from lnaddress</span>
    <span class="k">async</span> <span class="k">def</span> <span class="nf">get_bolt11</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">email</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">amount</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        fail state</span>
<span class="sd">        {&#39;reason&#39;: &#39;Amount 100 is smaller than minimum 100000.&#39;, &#39;status&#39;: &#39;ERROR&#39;}</span>

<span class="sd">        success state</span>
<span class="sd">        {&#39;pr&#39;: &#39;lnbc1......azgfe0&#39;,</span>
<span class="sd">        &#39;routes&#39;: [], &#39;successAction&#39;: {&#39;description&#39;: &#39;Thanks love for the lightning!&#39;,</span>
<span class="sd">        &#39;tag&#39;: &#39;url&#39;, &#39;url&#39;: &#39;https:/.......&#39;}}</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">purl</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_payurl</span><span class="p">(</span><span class="n">email</span><span class="p">)</span>
            <span class="n">json_content</span> <span class="o">=</span> <span class="k">await</span> <span class="n">get_url</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="n">purl</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_invoice_headers</span><span class="p">)</span>
            <span class="c1"># res =  requests.get(purl)</span>
            <span class="n">lnurlpay</span> <span class="o">=</span> <span class="n">json_content</span><span class="p">[</span><span class="s2">&quot;callback&quot;</span><span class="p">]</span>

            <span class="n">millisats</span> <span class="o">=</span> <span class="n">amount</span> <span class="o">*</span> <span class="mi">1000</span>
            <span class="n">payquery</span> <span class="o">=</span> <span class="n">lnurlpay</span> <span class="o">+</span> <span class="s2">&quot;?amount=&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">millisats</span><span class="p">)</span>

            <span class="c1"># get bech32-serialized lightning invoice</span>
            <span class="c1"># pr_dict =  requests.get(payquery)</span>
            <span class="n">pr_dict</span> <span class="o">=</span> <span class="k">await</span> <span class="n">get_url</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="n">payquery</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_invoice_headers</span><span class="p">)</span>
            <span class="c1"># check keys returned for status</span>
            <span class="k">if</span> <span class="s2">&quot;status&quot;</span> <span class="ow">in</span> <span class="n">pr_dict</span><span class="p">:</span>
                <span class="n">reason</span> <span class="o">=</span> <span class="n">pr_dict</span><span class="p">[</span><span class="s2">&quot;reason&quot;</span><span class="p">]</span>
                <span class="k">return</span> <span class="n">reason</span>
            <span class="k">elif</span> <span class="s2">&quot;pr&quot;</span> <span class="ow">in</span> <span class="n">pr_dict</span><span class="p">:</span>
                <span class="n">bolt11</span> <span class="o">=</span> <span class="n">pr_dict</span><span class="p">[</span><span class="s2">&quot;pr&quot;</span><span class="p">]</span>
                <span class="k">return</span> <span class="n">bolt11</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Exception as: &quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
            <span class="k">return</span> <span class="n">e</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="pylnbits.user_wallet.UserWallet.config" class="doc doc-heading">
<code class="highlight language-python"><span class="n">config</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>config property</p>
  </div>

</div>



<div class="doc doc-object doc-function">



<h3 id="pylnbits.user_wallet.UserWallet.__init__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">session</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p><strong>init</strong></p>

      <details class="quote">
        <summary>Source code in <code>pylnbits/user_wallet.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">,</span> <span class="n">session</span><span class="p">:</span> <span class="n">ClientSession</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;__init__</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_session</span> <span class="o">=</span> <span class="n">session</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_config</span> <span class="o">=</span> <span class="n">config</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_invoice_headers</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">invoice_headers</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_admin_headers</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">admin_headers</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_lnbits_url</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">lnbits_url</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">paypath</span> <span class="o">=</span> <span class="s2">&quot;/api/v1/payments&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">walletpath</span> <span class="o">=</span> <span class="s2">&quot;/api/v1/wallet&quot;</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pylnbits.user_wallet.UserWallet.check_invoice" class="doc doc-heading">
<code class="highlight language-python"><span class="n">check_invoice</span><span class="p">(</span><span class="nb">hash</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Check an invoice (incoming or outgoing)</p>
<p>GET /api/v1/payments/<payment_hash></p>
<p>Headers: invoice key</p>
<p>Returns 200 OK (application/json)
{"paid": <bool>}</p>

      <details class="quote">
        <summary>Source code in <code>pylnbits/user_wallet.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">check_invoice</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">hash</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Check an invoice (incoming or outgoing)</span>

<span class="sd">    GET /api/v1/payments/&lt;payment_hash&gt;</span>

<span class="sd">    Headers: invoice key</span>

<span class="sd">    Returns 200 OK (application/json)</span>
<span class="sd">    {&quot;paid&quot;: &lt;bool&gt;}</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># ppath = &quot;/api/v1/payments/&quot;</span>
        <span class="n">upath</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">paypath</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">hash</span>
        <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lnbits_url</span> <span class="o">+</span> <span class="n">upath</span>
        <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">get_url</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_invoice_headers</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">res</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">e</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pylnbits.user_wallet.UserWallet.create_invoice" class="doc doc-heading">
<code class="highlight language-python"><span class="n">create_invoice</span><span class="p">(</span><span class="n">direction</span><span class="p">,</span> <span class="n">amt</span><span class="p">,</span> <span class="n">memo</span><span class="p">,</span> <span class="n">webhook</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Create an invoice(incoming)</p>
<p>POST /api/v1/payments</p>
<p>Headers
{"X-Api-Key": "Invoice Key"}</p>
<p>Body (application/json)
{"out": false, "amount": <int>, "memo": <string>}</p>
<p>Returns 201 CREATED (application/json)
{"payment_hash": <string>, "payment_request": <string>}</p>
<p>curl -X POST https://bits.bitcoin.org.hk/api/v1/payments
-d '{"out": false, "amount": 100, "memo": "poo", "webhook": "http://google.com"}'
-H "X-Api-Key: f7f740104bba47e9ac9bb3fa......."  # only needs Invoice/read key
-H "Content-type: application/json"</p>

      <details class="quote">
        <summary>Source code in <code>pylnbits/user_wallet.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">create_invoice</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">direction</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span> <span class="n">amt</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">memo</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">webhook</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create an invoice(incoming)</span>

<span class="sd">    POST /api/v1/payments</span>

<span class="sd">    Headers</span>
<span class="sd">    {&quot;X-Api-Key&quot;: &quot;Invoice Key&quot;}</span>

<span class="sd">    Body (application/json)</span>
<span class="sd">    {&quot;out&quot;: false, &quot;amount&quot;: &lt;int&gt;, &quot;memo&quot;: &lt;string&gt;}</span>

<span class="sd">    Returns 201 CREATED (application/json)</span>
<span class="sd">    {&quot;payment_hash&quot;: &lt;string&gt;, &quot;payment_request&quot;: &lt;string&gt;}</span>

<span class="sd">    curl -X POST https://bits.bitcoin.org.hk/api/v1/payments</span>
<span class="sd">    -d &#39;{&quot;out&quot;: false, &quot;amount&quot;: 100, &quot;memo&quot;: &quot;poo&quot;, &quot;webhook&quot;: &quot;http://google.com&quot;}&#39;</span>
<span class="sd">    -H &quot;X-Api-Key: f7f740104bba47e9ac9bb3fa.......&quot;  # only needs Invoice/read key</span>
<span class="sd">    -H &quot;Content-type: application/json&quot;</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># upath = &quot;/api/v1/payments&quot;</span>
        <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lnbits_url</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">paypath</span>
        <span class="n">body</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;out&quot;</span><span class="p">:</span> <span class="n">direction</span><span class="p">,</span> <span class="s2">&quot;amount&quot;</span><span class="p">:</span> <span class="n">amt</span><span class="p">,</span> <span class="s2">&quot;memo&quot;</span><span class="p">:</span> <span class="n">memo</span><span class="p">,</span> <span class="s2">&quot;webhook&quot;</span><span class="p">:</span> <span class="n">webhook</span><span class="p">}</span>
        <span class="n">j</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">body</span><span class="p">)</span>
        <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">post_url</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_invoice_headers</span><span class="p">,</span> <span class="n">body</span><span class="o">=</span><span class="n">j</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">res</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">e</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pylnbits.user_wallet.UserWallet.get_bolt11" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_bolt11</span><span class="p">(</span><span class="n">email</span><span class="p">,</span> <span class="n">amount</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>fail state
{'reason': 'Amount 100 is smaller than minimum 100000.', 'status': 'ERROR'}</p>
<p>success state
{'pr': 'lnbc1......azgfe0',
'routes': [], 'successAction': {'description': 'Thanks love for the lightning!',
'tag': 'url', 'url': 'https:/.......'}}</p>

      <details class="quote">
        <summary>Source code in <code>pylnbits/user_wallet.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_bolt11</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">email</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">amount</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    fail state</span>
<span class="sd">    {&#39;reason&#39;: &#39;Amount 100 is smaller than minimum 100000.&#39;, &#39;status&#39;: &#39;ERROR&#39;}</span>

<span class="sd">    success state</span>
<span class="sd">    {&#39;pr&#39;: &#39;lnbc1......azgfe0&#39;,</span>
<span class="sd">    &#39;routes&#39;: [], &#39;successAction&#39;: {&#39;description&#39;: &#39;Thanks love for the lightning!&#39;,</span>
<span class="sd">    &#39;tag&#39;: &#39;url&#39;, &#39;url&#39;: &#39;https:/.......&#39;}}</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">purl</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_payurl</span><span class="p">(</span><span class="n">email</span><span class="p">)</span>
        <span class="n">json_content</span> <span class="o">=</span> <span class="k">await</span> <span class="n">get_url</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="n">purl</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_invoice_headers</span><span class="p">)</span>
        <span class="c1"># res =  requests.get(purl)</span>
        <span class="n">lnurlpay</span> <span class="o">=</span> <span class="n">json_content</span><span class="p">[</span><span class="s2">&quot;callback&quot;</span><span class="p">]</span>

        <span class="n">millisats</span> <span class="o">=</span> <span class="n">amount</span> <span class="o">*</span> <span class="mi">1000</span>
        <span class="n">payquery</span> <span class="o">=</span> <span class="n">lnurlpay</span> <span class="o">+</span> <span class="s2">&quot;?amount=&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">millisats</span><span class="p">)</span>

        <span class="c1"># get bech32-serialized lightning invoice</span>
        <span class="c1"># pr_dict =  requests.get(payquery)</span>
        <span class="n">pr_dict</span> <span class="o">=</span> <span class="k">await</span> <span class="n">get_url</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="n">payquery</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_invoice_headers</span><span class="p">)</span>
        <span class="c1"># check keys returned for status</span>
        <span class="k">if</span> <span class="s2">&quot;status&quot;</span> <span class="ow">in</span> <span class="n">pr_dict</span><span class="p">:</span>
            <span class="n">reason</span> <span class="o">=</span> <span class="n">pr_dict</span><span class="p">[</span><span class="s2">&quot;reason&quot;</span><span class="p">]</span>
            <span class="k">return</span> <span class="n">reason</span>
        <span class="k">elif</span> <span class="s2">&quot;pr&quot;</span> <span class="ow">in</span> <span class="n">pr_dict</span><span class="p">:</span>
            <span class="n">bolt11</span> <span class="o">=</span> <span class="n">pr_dict</span><span class="p">[</span><span class="s2">&quot;pr&quot;</span><span class="p">]</span>
            <span class="k">return</span> <span class="n">bolt11</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Exception as: &quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">e</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pylnbits.user_wallet.UserWallet.get_decoded" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_decoded</span><span class="p">(</span><span class="n">bolt11</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>POST /api/v1/payments/decode</p>
<p>Body (application/json)
{"data": <string>}</p>
<p>Returns 200 (application/json)</p>
<p>Headers: invoice key</p>

      <details class="quote">
        <summary>Source code in <code>pylnbits/user_wallet.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_decoded</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bolt11</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    POST /api/v1/payments/decode</span>

<span class="sd">    Body (application/json)</span>
<span class="sd">    {&quot;data&quot;: &lt;string&gt;}</span>

<span class="sd">    Returns 200 (application/json)</span>

<span class="sd">    Headers: invoice key</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">decode_url</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lnbits_url</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">paypath</span> <span class="o">+</span> <span class="s2">&quot;/decode&quot;</span>
        <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="n">bolt11</span><span class="p">}</span>
        <span class="n">j</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">payload</span><span class="p">)</span>
        <span class="c1">#res =  requests.post(decode_url, json=payload, headers=self._invoice_headers)</span>
        <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">post_url</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="n">decode_url</span><span class="p">,</span> <span class="n">body</span><span class="o">=</span><span class="n">j</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_invoice_headers</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">res</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Exception in get_decoded() &quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">e</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pylnbits.user_wallet.UserWallet.get_invoices" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_invoices</span><span class="p">()</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Get invoices (incoming or outgoing)</p>
<p>GET /api/v1/payments</p>
<p>Headers: invoice key</p>
<p>Returns 200 OK (application/json)
[{<invoices>}]</p>

      <details class="quote">
        <summary>Source code in <code>pylnbits/user_wallet.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_invoices</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get invoices (incoming or outgoing)</span>

<span class="sd">    GET /api/v1/payments</span>

<span class="sd">    Headers: invoice key</span>

<span class="sd">    Returns 200 OK (application/json)</span>
<span class="sd">    [{&lt;invoices&gt;}]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># ppath = &quot;/api/v1/payments/&quot;</span>
        <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lnbits_url</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">paypath</span>
        <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">get_url</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_invoice_headers</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">res</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">e</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pylnbits.user_wallet.UserWallet.get_invoicesbymemo" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_invoicesbymemo</span><span class="p">(</span><span class="n">memo</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>GET /api/v1/payments?memo=<memo></p>
<p>Returns 200 OK (application/json)
[{<invoices>}]</p>
<p>Headers: invoice key</p>

      <details class="quote">
        <summary>Source code in <code>pylnbits/user_wallet.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_invoicesbymemo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">memo</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    GET /api/v1/payments?memo=&lt;memo&gt;</span>

<span class="sd">    Returns 200 OK (application/json)</span>
<span class="sd">    [{&lt;invoices&gt;}]</span>

<span class="sd">    Headers: invoice key</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lnbits_url</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">paypath</span> <span class="o">+</span> <span class="s2">&quot;?memo=&quot;</span> <span class="o">+</span> <span class="n">memo</span>
        <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">get_url</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_invoice_headers</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">res</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">e</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pylnbits.user_wallet.UserWallet.get_payhash" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_payhash</span><span class="p">(</span><span class="n">bolt11</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Only returns the payment hash not entire decoded invoice</p>

      <details class="quote">
        <summary>Source code in <code>pylnbits/user_wallet.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_payhash</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bolt11</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Only returns the payment hash not entire decoded invoice</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">decoded</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_decoded</span><span class="p">(</span><span class="n">bolt11</span><span class="p">)</span>
    <span class="c1"># print(decoded)</span>
    <span class="k">if</span> <span class="s2">&quot;payment_hash&quot;</span> <span class="ow">in</span> <span class="n">decoded</span><span class="p">:</span>
        <span class="n">payhash</span> <span class="o">=</span> <span class="n">decoded</span><span class="p">[</span><span class="s2">&quot;payment_hash&quot;</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">payhash</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pylnbits.user_wallet.UserWallet.get_payurl" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_payurl</span><span class="p">(</span><span class="n">email</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Construct Lnurlp link from email address provided.</p>

      <details class="quote">
        <summary>Source code in <code>pylnbits/user_wallet.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_payurl</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">email</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Construct Lnurlp link from email address provided.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">parts</span> <span class="o">=</span> <span class="n">email</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;@&quot;</span><span class="p">)</span>
        <span class="n">domain</span> <span class="o">=</span> <span class="n">parts</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">username</span> <span class="o">=</span> <span class="n">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">transform_url</span> <span class="o">=</span> <span class="s2">&quot;http://&quot;</span> <span class="o">+</span> <span class="n">domain</span> <span class="o">+</span> <span class="s2">&quot;/.well-known/lnurlp/&quot;</span> <span class="o">+</span> <span class="n">username</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Transformed URl: &quot;</span> <span class="o">+</span> <span class="n">transform_url</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">transform_url</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Exception, possibly malformed LN Address: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pylnbits.user_wallet.UserWallet.get_wallet_details" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_wallet_details</span><span class="p">()</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>GET /api/v1/wallet</p>
<p>Headers
{"X-Api-Key": "Invoice key"}</p>
<p>Returns 200 OK (application/json)
{"id": <string>, "name": <string>, "balance": <int>}</p>

      <details class="quote">
        <summary>Source code in <code>pylnbits/user_wallet.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_wallet_details</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    GET /api/v1/wallet</span>

<span class="sd">    Headers</span>
<span class="sd">    {&quot;X-Api-Key&quot;: &quot;Invoice key&quot;}</span>

<span class="sd">    Returns 200 OK (application/json)</span>
<span class="sd">    {&quot;id&quot;: &lt;string&gt;, &quot;name&quot;: &lt;string&gt;, &quot;balance&quot;: &lt;int&gt;}</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># upath = &quot;/api/v1/wallet&quot;</span>
        <span class="n">upath</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">walletpath</span>
        <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lnbits_url</span> <span class="o">+</span> <span class="n">upath</span>
        <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">get_url</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_invoice_headers</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">res</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">e</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pylnbits.user_wallet.UserWallet.pay_invoice" class="doc doc-heading">
<code class="highlight language-python"><span class="n">pay_invoice</span><span class="p">(</span><span class="n">direction</span><span class="p">,</span> <span class="n">bolt11</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Pay an invoice (outgoing)</p>
<p>POST /api/v1/payments</p>
<p>Headers
{"X-Api-Key": "Admin key"}</p>
<p>Body (application/json)
{"out": true, "bolt11": <string>}</p>
<p>Returns 201 CREATED (application/json)
{"payment_hash": <string>}</p>
<p>curl -X POST https://bits.bitcoin.org.hk/api/v1/payments
-d '{"out": true, "bolt11": <string>}'
-H "X-Api-Key: b811bd2580a0431c96d3c4......"  # TODO: needs admin key!
-H "Content-type: application/json"</p>

      <details class="quote">
        <summary>Source code in <code>pylnbits/user_wallet.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">pay_invoice</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">direction</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span> <span class="n">bolt11</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Pay an invoice (outgoing)</span>

<span class="sd">    POST /api/v1/payments</span>

<span class="sd">    Headers</span>
<span class="sd">    {&quot;X-Api-Key&quot;: &quot;Admin key&quot;}</span>

<span class="sd">    Body (application/json)</span>
<span class="sd">    {&quot;out&quot;: true, &quot;bolt11&quot;: &lt;string&gt;}</span>

<span class="sd">    Returns 201 CREATED (application/json)</span>
<span class="sd">    {&quot;payment_hash&quot;: &lt;string&gt;}</span>

<span class="sd">    curl -X POST https://bits.bitcoin.org.hk/api/v1/payments</span>
<span class="sd">    -d &#39;{&quot;out&quot;: true, &quot;bolt11&quot;: &lt;string&gt;}&#39;</span>
<span class="sd">    -H &quot;X-Api-Key: b811bd2580a0431c96d3c4......&quot;  # TODO: needs admin key!</span>
<span class="sd">    -H &quot;Content-type: application/json&quot;</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># upath = &quot;/api/v1/payments&quot;</span>
        <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lnbits_url</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">paypath</span>
        <span class="n">body</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;out&quot;</span><span class="p">:</span> <span class="n">direction</span><span class="p">,</span> <span class="s2">&quot;bolt11&quot;</span><span class="p">:</span> <span class="n">bolt11</span><span class="p">}</span>
        <span class="n">j</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">body</span><span class="p">)</span>
        <span class="c1">#  print(f&quot;body: {j}&quot;)</span>
        <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">post_url</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_admin_headers</span><span class="p">,</span> <span class="n">body</span><span class="o">=</span><span class="n">j</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">res</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">e</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>




  </div>

  </div>

</div>

<div class="doc doc-object doc-module">


<a id="pylnbits.user_manager"></a>
  <div class="doc doc-contents first">

  

  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="pylnbits.user_manager.UserManager" class="doc doc-heading">
        <code>UserManager</code>


</h2>


  <div class="doc doc-contents ">



        <details class="quote">
          <summary>Source code in <code>pylnbits/user_manager.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">UserManager</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">,</span> <span class="n">session</span><span class="p">:</span> <span class="n">ClientSession</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;__init__</span>

<span class="sd">            Initializes a UserManager extension via API</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_config</span> <span class="o">=</span> <span class="n">config</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_lnbits_url</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">lnbits_url</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_invoice_headers</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">invoice_headers</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_admin_headers</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">admin_headers</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_session</span> <span class="o">=</span> <span class="n">session</span>

    <span class="c1"># returns JSON list of users</span>
    <span class="k">async</span> <span class="k">def</span> <span class="nf">get_users</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            get users managed by the User Manager Extension</span>

<span class="sd">            Returns: </span>
<span class="sd">                JSON list of users</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">upath</span> <span class="o">=</span> <span class="s2">&quot;/usermanager/api/v1/users&quot;</span>
            <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lnbits_url</span> <span class="o">+</span> <span class="n">upath</span>
            <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">get_url</span><span class="p">(</span><span class="n">session</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_invoice_headers</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">res</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">e</span>

    <span class="c1"># returns single JSON user based on user_id</span>
    <span class="k">async</span> <span class="k">def</span> <span class="nf">get_user</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_id</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            gets a user based on user_id</span>

<span class="sd">            Returns a single JSON based on used_id</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">upath</span> <span class="o">=</span> <span class="s2">&quot;/usermanager/api/v1/users/&quot;</span> <span class="o">+</span> <span class="n">user_id</span>
            <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lnbits_url</span> <span class="o">+</span> <span class="n">upath</span>
            <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">get_url</span><span class="p">(</span><span class="n">session</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_invoice_headers</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">res</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">e</span>

    <span class="c1"># returns JSON wallet data</span>
    <span class="k">async</span> <span class="k">def</span> <span class="nf">get_wallets</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_id</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;&quot;</span>
<span class="sd">            gets wallets based on user_id</span>

<span class="sd">            Returns JSON of wallet data</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">wpath</span> <span class="o">=</span> <span class="s2">&quot;/usermanager/api/v1/wallets/&quot;</span> <span class="o">+</span> <span class="n">user_id</span>
            <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lnbits_url</span> <span class="o">+</span> <span class="n">wpath</span>
            <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">get_url</span><span class="p">(</span><span class="n">session</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_invoice_headers</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">res</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">e</span>

    <span class="c1"># returns JSON of wallet transactions</span>
    <span class="k">async</span> <span class="k">def</span> <span class="nf">get_tx</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">wallet_id</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Gets all transactions in a wallet </span>

<span class="sd">            Returns JSON of Wallet Transactions</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">tpath</span> <span class="o">=</span> <span class="s2">&quot;/usermanager/api/v1/wallets&quot;</span> <span class="o">+</span> <span class="n">wallet_id</span>
            <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lnbits_url</span> <span class="o">+</span> <span class="n">tpath</span>
            <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">get_url</span><span class="p">(</span><span class="n">session</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_invoice_headers</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">res</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">e</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">post_user_initial</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">admin_id</span><span class="p">,</span> <span class="n">user_name</span><span class="p">,</span> <span class="n">wallet_name</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            creates a user and an initial wallet</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">tpath</span> <span class="o">=</span> <span class="s2">&quot;/usermanager/api/v1/users&quot;</span>
            <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lnbits_url</span> <span class="o">+</span> <span class="n">tpath</span>
            <span class="n">body</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;admin_id&quot;</span><span class="p">:</span> <span class="n">admin_id</span><span class="p">,</span> <span class="s2">&quot;user_name&quot;</span><span class="p">:</span> <span class="n">user_name</span><span class="p">,</span> <span class="s2">&quot;wallet_name&quot;</span><span class="p">:</span> <span class="n">wallet_name</span><span class="p">}</span>
            <span class="n">jbody</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">body</span><span class="p">)</span>
            <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">post_url</span><span class="p">(</span><span class="n">session</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_invoice_headers</span><span class="p">,</span> <span class="n">body</span><span class="o">=</span><span class="n">jbody</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">res</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">e</span>

    <span class="c1"># body = {&quot;user_id&quot;: &lt;string&gt;, &quot;wallet_name&quot;: &lt;string&gt;, &quot;admin_id&quot;: &lt;string&gt;}</span>
    <span class="c1"># returns 201 CREATED</span>
    <span class="c1"># {&quot;id&quot;: &lt;string&gt;, &quot;admin&quot;: &lt;string&gt;, &quot;name&quot;: &lt;string&gt;,</span>
    <span class="c1"># &quot;user&quot;: &lt;string&gt;, &quot;adminkey&quot;: &lt;string&gt;, &quot;inkey&quot;: &lt;string&gt;}</span>
    <span class="k">async</span> <span class="k">def</span> <span class="nf">post_wallet</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_id</span><span class="p">,</span> <span class="n">wallet_name</span><span class="p">,</span> <span class="n">admin_id</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Post_wallet returns api keys related to wallet</span>

<span class="sd">            Returns {&quot;id&quot;: &lt;string&gt;, &quot;admin&quot;: &lt;string&gt;, &quot;name&quot;: &lt;string&gt;, &quot;user&quot;: &lt;string&gt;, &quot;adminkey&quot;: &lt;string&gt;, &quot;inkey&quot;: &lt;string&gt;}</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">tpath</span> <span class="o">=</span> <span class="s2">&quot;/usermanager/api/v1/wallets&quot;</span>
            <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lnbits_url</span> <span class="o">+</span> <span class="n">tpath</span>
            <span class="n">body</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;user_id&quot;</span><span class="p">:</span> <span class="n">user_id</span><span class="p">,</span> <span class="s2">&quot;wallet_name&quot;</span><span class="p">:</span> <span class="n">wallet_name</span><span class="p">,</span> <span class="s2">&quot;admin_id&quot;</span><span class="p">:</span> <span class="n">admin_id</span><span class="p">}</span>
            <span class="n">jbody</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">body</span><span class="p">)</span>
            <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">post_url</span><span class="p">(</span><span class="n">session</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_invoice_headers</span><span class="p">,</span> <span class="n">body</span><span class="o">=</span><span class="n">jbody</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">res</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">e</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">delete_user</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_id</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Deletes a user based on user_id</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">tpath</span> <span class="o">=</span> <span class="s2">&quot;/usermanager/api/v1/users/&quot;</span> <span class="o">+</span> <span class="n">user_id</span>
            <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lnbits_url</span> <span class="o">+</span> <span class="n">tpath</span>
            <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">delete_url</span><span class="p">(</span><span class="n">session</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_invoice_headers</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">res</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">e</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">delete_wallet</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">wallet_id</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Delete a wallet based on wallet_id</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">tpath</span> <span class="o">=</span> <span class="s2">&quot;/usermanager/api/v1/wallets/&quot;</span> <span class="o">+</span> <span class="n">wallet_id</span>
            <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lnbits_url</span> <span class="o">+</span> <span class="n">tpath</span>
            <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">delete_url</span><span class="p">(</span><span class="n">session</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_invoice_headers</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">res</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">e</span>

    <span class="c1"># temporarily use this to activate extensions:</span>
    <span class="c1"># https://yourdomain.com/extensions?usr=89.....&amp;enable=lnurlp</span>
    <span class="c1"># unclear why curl doesn&#39;t work ?</span>
    <span class="k">async</span> <span class="k">def</span> <span class="nf">post_activate_ext</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">extension</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">active</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            activates an extension for a user created by User Manager Extension</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">tpath</span> <span class="o">=</span> <span class="s2">&quot;/usermanager/api/v1/extensions&quot;</span>
            <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lnbits_url</span> <span class="o">+</span> <span class="n">tpath</span>
            <span class="n">body</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;userid&quot;</span><span class="p">:</span> <span class="n">user_id</span><span class="p">,</span> <span class="s2">&quot;extension&quot;</span><span class="p">:</span> <span class="n">extension</span><span class="p">,</span> <span class="s2">&quot;active&quot;</span><span class="p">:</span> <span class="n">active</span><span class="p">}</span>
            <span class="n">jbody</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">body</span><span class="p">)</span>
            <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">post_url</span><span class="p">(</span><span class="n">session</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_invoice_headers</span><span class="p">,</span> <span class="n">body</span><span class="o">=</span><span class="n">jbody</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">res</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">e</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">









<div class="doc doc-object doc-function">



<h3 id="pylnbits.user_manager.UserManager.__init__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">session</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p><strong>init</strong></p>
<p>Initializes a UserManager extension via API</p>

      <details class="quote">
        <summary>Source code in <code>pylnbits/user_manager.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">,</span> <span class="n">session</span><span class="p">:</span> <span class="n">ClientSession</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;__init__</span>

<span class="sd">        Initializes a UserManager extension via API</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_config</span> <span class="o">=</span> <span class="n">config</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_lnbits_url</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">lnbits_url</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_invoice_headers</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">invoice_headers</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_admin_headers</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">admin_headers</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_session</span> <span class="o">=</span> <span class="n">session</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pylnbits.user_manager.UserManager.delete_user" class="doc doc-heading">
<code class="highlight language-python"><span class="n">delete_user</span><span class="p">(</span><span class="n">user_id</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Deletes a user based on user_id</p>

      <details class="quote">
        <summary>Source code in <code>pylnbits/user_manager.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">delete_user</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_id</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Deletes a user based on user_id</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">tpath</span> <span class="o">=</span> <span class="s2">&quot;/usermanager/api/v1/users/&quot;</span> <span class="o">+</span> <span class="n">user_id</span>
        <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lnbits_url</span> <span class="o">+</span> <span class="n">tpath</span>
        <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">delete_url</span><span class="p">(</span><span class="n">session</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_invoice_headers</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">res</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">e</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pylnbits.user_manager.UserManager.delete_wallet" class="doc doc-heading">
<code class="highlight language-python"><span class="n">delete_wallet</span><span class="p">(</span><span class="n">wallet_id</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Delete a wallet based on wallet_id</p>

      <details class="quote">
        <summary>Source code in <code>pylnbits/user_manager.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">delete_wallet</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">wallet_id</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Delete a wallet based on wallet_id</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">tpath</span> <span class="o">=</span> <span class="s2">&quot;/usermanager/api/v1/wallets/&quot;</span> <span class="o">+</span> <span class="n">wallet_id</span>
        <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lnbits_url</span> <span class="o">+</span> <span class="n">tpath</span>
        <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">delete_url</span><span class="p">(</span><span class="n">session</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_invoice_headers</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">res</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">e</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pylnbits.user_manager.UserManager.get_tx" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_tx</span><span class="p">(</span><span class="n">wallet_id</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Gets all transactions in a wallet </p>
<p>Returns JSON of Wallet Transactions</p>

      <details class="quote">
        <summary>Source code in <code>pylnbits/user_manager.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_tx</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">wallet_id</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets all transactions in a wallet </span>

<span class="sd">        Returns JSON of Wallet Transactions</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">tpath</span> <span class="o">=</span> <span class="s2">&quot;/usermanager/api/v1/wallets&quot;</span> <span class="o">+</span> <span class="n">wallet_id</span>
        <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lnbits_url</span> <span class="o">+</span> <span class="n">tpath</span>
        <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">get_url</span><span class="p">(</span><span class="n">session</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_invoice_headers</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">res</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">e</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pylnbits.user_manager.UserManager.get_user" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_user</span><span class="p">(</span><span class="n">user_id</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>gets a user based on user_id</p>
<p>Returns a single JSON based on used_id</p>

      <details class="quote">
        <summary>Source code in <code>pylnbits/user_manager.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_user</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_id</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        gets a user based on user_id</span>

<span class="sd">        Returns a single JSON based on used_id</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">upath</span> <span class="o">=</span> <span class="s2">&quot;/usermanager/api/v1/users/&quot;</span> <span class="o">+</span> <span class="n">user_id</span>
        <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lnbits_url</span> <span class="o">+</span> <span class="n">upath</span>
        <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">get_url</span><span class="p">(</span><span class="n">session</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_invoice_headers</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">res</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">e</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pylnbits.user_manager.UserManager.get_users" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_users</span><span class="p">()</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>get users managed by the User Manager Extension</p>

<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
    <th class="field-name">Returns:</th>
    <td class="field-body">
      <ul class="first simple">
          <li>
            –
            <div class="doc-md-description">
              <p>JSON list of users</p>
            </div>
          </li>
      </ul>
    </td>
    </tr>
  </tbody>
</table>
      <details class="quote">
        <summary>Source code in <code>pylnbits/user_manager.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_users</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        get users managed by the User Manager Extension</span>

<span class="sd">        Returns: </span>
<span class="sd">            JSON list of users</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">upath</span> <span class="o">=</span> <span class="s2">&quot;/usermanager/api/v1/users&quot;</span>
        <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lnbits_url</span> <span class="o">+</span> <span class="n">upath</span>
        <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">get_url</span><span class="p">(</span><span class="n">session</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_invoice_headers</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">res</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">e</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pylnbits.user_manager.UserManager.get_wallets" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_wallets</span><span class="p">(</span><span class="n">user_id</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>"
gets wallets based on user_id</p>
<p>Returns JSON of wallet data</p>

      <details class="quote">
        <summary>Source code in <code>pylnbits/user_manager.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_wallets</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_id</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;&quot;</span>
<span class="sd">        gets wallets based on user_id</span>

<span class="sd">        Returns JSON of wallet data</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">wpath</span> <span class="o">=</span> <span class="s2">&quot;/usermanager/api/v1/wallets/&quot;</span> <span class="o">+</span> <span class="n">user_id</span>
        <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lnbits_url</span> <span class="o">+</span> <span class="n">wpath</span>
        <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">get_url</span><span class="p">(</span><span class="n">session</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_invoice_headers</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">res</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">e</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pylnbits.user_manager.UserManager.post_activate_ext" class="doc doc-heading">
<code class="highlight language-python"><span class="n">post_activate_ext</span><span class="p">(</span><span class="n">user_id</span><span class="p">,</span> <span class="n">extension</span><span class="p">,</span> <span class="n">active</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>activates an extension for a user created by User Manager Extension</p>

      <details class="quote">
        <summary>Source code in <code>pylnbits/user_manager.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">post_activate_ext</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">extension</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">active</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        activates an extension for a user created by User Manager Extension</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">tpath</span> <span class="o">=</span> <span class="s2">&quot;/usermanager/api/v1/extensions&quot;</span>
        <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lnbits_url</span> <span class="o">+</span> <span class="n">tpath</span>
        <span class="n">body</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;userid&quot;</span><span class="p">:</span> <span class="n">user_id</span><span class="p">,</span> <span class="s2">&quot;extension&quot;</span><span class="p">:</span> <span class="n">extension</span><span class="p">,</span> <span class="s2">&quot;active&quot;</span><span class="p">:</span> <span class="n">active</span><span class="p">}</span>
        <span class="n">jbody</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">body</span><span class="p">)</span>
        <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">post_url</span><span class="p">(</span><span class="n">session</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_invoice_headers</span><span class="p">,</span> <span class="n">body</span><span class="o">=</span><span class="n">jbody</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">res</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">e</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pylnbits.user_manager.UserManager.post_user_initial" class="doc doc-heading">
<code class="highlight language-python"><span class="n">post_user_initial</span><span class="p">(</span><span class="n">admin_id</span><span class="p">,</span> <span class="n">user_name</span><span class="p">,</span> <span class="n">wallet_name</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>creates a user and an initial wallet</p>

      <details class="quote">
        <summary>Source code in <code>pylnbits/user_manager.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">post_user_initial</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">admin_id</span><span class="p">,</span> <span class="n">user_name</span><span class="p">,</span> <span class="n">wallet_name</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        creates a user and an initial wallet</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">tpath</span> <span class="o">=</span> <span class="s2">&quot;/usermanager/api/v1/users&quot;</span>
        <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lnbits_url</span> <span class="o">+</span> <span class="n">tpath</span>
        <span class="n">body</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;admin_id&quot;</span><span class="p">:</span> <span class="n">admin_id</span><span class="p">,</span> <span class="s2">&quot;user_name&quot;</span><span class="p">:</span> <span class="n">user_name</span><span class="p">,</span> <span class="s2">&quot;wallet_name&quot;</span><span class="p">:</span> <span class="n">wallet_name</span><span class="p">}</span>
        <span class="n">jbody</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">body</span><span class="p">)</span>
        <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">post_url</span><span class="p">(</span><span class="n">session</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_invoice_headers</span><span class="p">,</span> <span class="n">body</span><span class="o">=</span><span class="n">jbody</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">res</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">e</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pylnbits.user_manager.UserManager.post_wallet" class="doc doc-heading">
<code class="highlight language-python"><span class="n">post_wallet</span><span class="p">(</span><span class="n">user_id</span><span class="p">,</span> <span class="n">wallet_name</span><span class="p">,</span> <span class="n">admin_id</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Post_wallet returns api keys related to wallet</p>
<p>Returns {"id": <string>, "admin": <string>, "name": <string>, "user": <string>, "adminkey": <string>, "inkey": <string>}</p>

      <details class="quote">
        <summary>Source code in <code>pylnbits/user_manager.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">post_wallet</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_id</span><span class="p">,</span> <span class="n">wallet_name</span><span class="p">,</span> <span class="n">admin_id</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Post_wallet returns api keys related to wallet</span>

<span class="sd">        Returns {&quot;id&quot;: &lt;string&gt;, &quot;admin&quot;: &lt;string&gt;, &quot;name&quot;: &lt;string&gt;, &quot;user&quot;: &lt;string&gt;, &quot;adminkey&quot;: &lt;string&gt;, &quot;inkey&quot;: &lt;string&gt;}</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">tpath</span> <span class="o">=</span> <span class="s2">&quot;/usermanager/api/v1/wallets&quot;</span>
        <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lnbits_url</span> <span class="o">+</span> <span class="n">tpath</span>
        <span class="n">body</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;user_id&quot;</span><span class="p">:</span> <span class="n">user_id</span><span class="p">,</span> <span class="s2">&quot;wallet_name&quot;</span><span class="p">:</span> <span class="n">wallet_name</span><span class="p">,</span> <span class="s2">&quot;admin_id&quot;</span><span class="p">:</span> <span class="n">admin_id</span><span class="p">}</span>
        <span class="n">jbody</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">body</span><span class="p">)</span>
        <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">post_url</span><span class="p">(</span><span class="n">session</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_invoice_headers</span><span class="p">,</span> <span class="n">body</span><span class="o">=</span><span class="n">jbody</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">res</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">e</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>




  </div>

  </div>

</div>

<div class="doc doc-object doc-module">


<a id="pylnbits.lnurl_p"></a>
  <div class="doc doc-contents first">

  

  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="pylnbits.lnurl_p.LnurlPay" class="doc doc-heading">
        <code>LnurlPay</code>


</h2>


  <div class="doc doc-contents ">



        <details class="quote">
          <summary>Source code in <code>pylnbits/lnurl_p.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">LnurlPay</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">,</span> <span class="n">session</span><span class="p">:</span> <span class="n">ClientSession</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_config</span> <span class="o">=</span> <span class="n">config</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_lnbits_url</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">lnbits_url</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_invoice_headers</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">invoice_headers</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_admin_headers</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">admin_headers</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_session</span> <span class="o">=</span> <span class="n">session</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_upath</span> <span class="o">=</span> <span class="s2">&quot;/lnurlp/api/v1/links&quot;</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">list_paylinks</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        GET /lnurlp/api/v1/links</span>
<span class="sd">        Returns list pay links. Returns 200 OK app/json [&lt;pay_link_object&gt;, ...]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lnbits_url</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_upath</span>
            <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">get_url</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_invoice_headers</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">res</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">e</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">get_paylink</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pay_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        GET /lnurlp/api/v1/links/&lt;pay_id&gt;</span>
<span class="sd">        Returns list pay links. Returns 200 OK app/json</span>
<span class="sd">        {&quot;lnurl&quot;: &lt;string&gt;}</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lnbits_url</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_upath</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="n">pay_id</span>
            <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">get_url</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_invoice_headers</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">res</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">e</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">create_paylink</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">body</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        POST /lnurlp/api/v1/links</span>

<span class="sd">        Body (application/json)</span>
<span class="sd">        {&quot;description&quot;: &lt;string&gt; &quot;amount&quot;: &lt;integer&gt; &quot;max&quot;: &lt;integer&gt;</span>
<span class="sd">         &quot;min&quot;: &lt;integer&gt; &quot;comment_chars&quot;: &lt;integer&gt;}</span>

<span class="sd">        Returns Returns 201 CREATED app/json</span>
<span class="sd">        {&quot;lnurl&quot;: &lt;string&gt;}</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lnbits_url</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_upath</span>
            <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">post_url</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_admin_headers</span><span class="p">,</span> <span class="n">body</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">body</span><span class="p">))</span>
            <span class="k">return</span> <span class="n">res</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">e</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">update_paylink</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pay_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">body</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        PUT /lnurlp/api/v1/links/&lt;pay_id&gt;</span>

<span class="sd">        Body (application/json)</span>
<span class="sd">        {&quot;description&quot;: &lt;string&gt; &quot;amount&quot;: &lt;integer&gt;}</span>

<span class="sd">        Returns Returns 200 OK app/json</span>
<span class="sd">        {&quot;lnurl&quot;: &lt;string&gt;}</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lnbits_url</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_upath</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="n">pay_id</span>
            <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">put_url</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_admin_headers</span><span class="p">,</span> <span class="n">body</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">body</span><span class="p">))</span>
            <span class="k">return</span> <span class="n">res</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">e</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">delete_paylink</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pay_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        DELETE /lnurlp/api/v1/links/&lt;pay_id&gt;</span>

<span class="sd">        Returns Returns 204 NO CONTENT</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lnbits_url</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_upath</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="n">pay_id</span>
            <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">delete_url</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_admin_headers</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">res</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">e</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">









<div class="doc doc-object doc-function">



<h3 id="pylnbits.lnurl_p.LnurlPay.create_paylink" class="doc doc-heading">
<code class="highlight language-python"><span class="n">create_paylink</span><span class="p">(</span><span class="n">body</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>POST /lnurlp/api/v1/links</p>
<p>Body (application/json)
{"description": <string> "amount": <integer> "max": <integer>
 "min": <integer> "comment_chars": <integer>}</p>
<p>Returns Returns 201 CREATED app/json
{"lnurl": <string>}</p>

      <details class="quote">
        <summary>Source code in <code>pylnbits/lnurl_p.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">create_paylink</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">body</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    POST /lnurlp/api/v1/links</span>

<span class="sd">    Body (application/json)</span>
<span class="sd">    {&quot;description&quot;: &lt;string&gt; &quot;amount&quot;: &lt;integer&gt; &quot;max&quot;: &lt;integer&gt;</span>
<span class="sd">     &quot;min&quot;: &lt;integer&gt; &quot;comment_chars&quot;: &lt;integer&gt;}</span>

<span class="sd">    Returns Returns 201 CREATED app/json</span>
<span class="sd">    {&quot;lnurl&quot;: &lt;string&gt;}</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lnbits_url</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_upath</span>
        <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">post_url</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_admin_headers</span><span class="p">,</span> <span class="n">body</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">body</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">res</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">e</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pylnbits.lnurl_p.LnurlPay.delete_paylink" class="doc doc-heading">
<code class="highlight language-python"><span class="n">delete_paylink</span><span class="p">(</span><span class="n">pay_id</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>DELETE /lnurlp/api/v1/links/<pay_id></p>
<p>Returns Returns 204 NO CONTENT</p>

      <details class="quote">
        <summary>Source code in <code>pylnbits/lnurl_p.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">delete_paylink</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pay_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    DELETE /lnurlp/api/v1/links/&lt;pay_id&gt;</span>

<span class="sd">    Returns Returns 204 NO CONTENT</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lnbits_url</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_upath</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="n">pay_id</span>
        <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">delete_url</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_admin_headers</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">res</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">e</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pylnbits.lnurl_p.LnurlPay.get_paylink" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_paylink</span><span class="p">(</span><span class="n">pay_id</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>GET /lnurlp/api/v1/links/<pay_id>
Returns list pay links. Returns 200 OK app/json
{"lnurl": <string>}</p>

      <details class="quote">
        <summary>Source code in <code>pylnbits/lnurl_p.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_paylink</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pay_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    GET /lnurlp/api/v1/links/&lt;pay_id&gt;</span>
<span class="sd">    Returns list pay links. Returns 200 OK app/json</span>
<span class="sd">    {&quot;lnurl&quot;: &lt;string&gt;}</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lnbits_url</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_upath</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="n">pay_id</span>
        <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">get_url</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_invoice_headers</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">res</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">e</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pylnbits.lnurl_p.LnurlPay.list_paylinks" class="doc doc-heading">
<code class="highlight language-python"><span class="n">list_paylinks</span><span class="p">()</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>GET /lnurlp/api/v1/links
Returns list pay links. Returns 200 OK app/json [<pay_link_object>, ...]</p>

      <details class="quote">
        <summary>Source code in <code>pylnbits/lnurl_p.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">list_paylinks</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    GET /lnurlp/api/v1/links</span>
<span class="sd">    Returns list pay links. Returns 200 OK app/json [&lt;pay_link_object&gt;, ...]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lnbits_url</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_upath</span>
        <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">get_url</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_invoice_headers</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">res</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">e</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pylnbits.lnurl_p.LnurlPay.update_paylink" class="doc doc-heading">
<code class="highlight language-python"><span class="n">update_paylink</span><span class="p">(</span><span class="n">pay_id</span><span class="p">,</span> <span class="n">body</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>PUT /lnurlp/api/v1/links/<pay_id></p>
<p>Body (application/json)
{"description": <string> "amount": <integer>}</p>
<p>Returns Returns 200 OK app/json
{"lnurl": <string>}</p>

      <details class="quote">
        <summary>Source code in <code>pylnbits/lnurl_p.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span>
<span class="normal">97</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">update_paylink</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pay_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">body</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    PUT /lnurlp/api/v1/links/&lt;pay_id&gt;</span>

<span class="sd">    Body (application/json)</span>
<span class="sd">    {&quot;description&quot;: &lt;string&gt; &quot;amount&quot;: &lt;integer&gt;}</span>

<span class="sd">    Returns Returns 200 OK app/json</span>
<span class="sd">    {&quot;lnurl&quot;: &lt;string&gt;}</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lnbits_url</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_upath</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="n">pay_id</span>
        <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">put_url</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_admin_headers</span><span class="p">,</span> <span class="n">body</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">body</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">res</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">e</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>




  </div>

  </div>

</div>

<div class="doc doc-object doc-module">


<a id="pylnbits.lnurl_w"></a>
  <div class="doc doc-contents first">

  

  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="pylnbits.lnurl_w.LnurlWithdraw" class="doc doc-heading">
        <code>LnurlWithdraw</code>


</h2>


  <div class="doc doc-contents ">



        <details class="quote">
          <summary>Source code in <code>pylnbits/lnurl_w.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">LnurlWithdraw</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">,</span> <span class="n">session</span><span class="p">:</span> <span class="n">ClientSession</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_config</span> <span class="o">=</span> <span class="n">config</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_lnbits_url</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">lnbits_url</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_invoice_headers</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">invoice_headers</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_admin_headers</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">admin_headers</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_session</span> <span class="o">=</span> <span class="n">session</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_upath</span> <span class="o">=</span> <span class="s2">&quot;/withdraw/api/v1/links&quot;</span>


    <span class="c1"># List withdraw links </span>
    <span class="k">async</span> <span class="k">def</span> <span class="nf">list_withdrawlinks</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        GET /withdraw/api/v1/links</span>
<span class="sd">        Returns list withdraw links. Returns 200 OK app/json [&lt;withdraw_link_object&gt;, ...]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lnbits_url</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_upath</span>
            <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">get_url</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_invoice_headers</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">res</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">e</span>


    <span class="c1"># Get a withdraw link </span>
    <span class="k">async</span> <span class="k">def</span> <span class="nf">get_withdrawlink</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">withdraw_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        GET /withdraw/api/v1/links/&lt;pay_id&gt;</span>
<span class="sd">        Returns list pay links. Returns 200 OK app/json</span>
<span class="sd">        {&quot;lnurl&quot;: &lt;string&gt;}</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lnbits_url</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_upath</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="n">withdraw_id</span>
            <span class="c1"># print(f&quot;GET WITHDRAWL LINK PATH: {path}&quot;)</span>
            <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">get_url_resp</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_invoice_headers</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">res</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">e</span>


    <span class="c1"># Create a withdraw link </span>
    <span class="k">async</span> <span class="k">def</span> <span class="nf">create_withdrawlink</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">body</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        POST /withdraw/api/v1/links</span>

<span class="sd">        Body (application/json)</span>
<span class="sd">        {&quot;title&quot;: &lt;string&gt;, &quot;min_withdrawable&quot;: &lt;integer&gt;, </span>
<span class="sd">        &quot;max_withdrawable&quot;: &lt;integer&gt;, &quot;uses&quot;: &lt;integer&gt;,</span>
<span class="sd">        &quot;wait_time&quot;: &lt;integer&gt;, &quot;is_unique&quot;: &lt;boolean&gt;}</span>

<span class="sd">        Returns Returns 201 CREATED app/json</span>
<span class="sd">        {&quot;id&quot;: &lt; string&gt; , &quot;is_unique&quot;: &lt;boolean&gt;, &quot;k1&quot;: &lt;str&gt;, </span>
<span class="sd">        &quot;lnurl&quot;: &lt;string&gt;, &quot;max_withdrawable&quot;: &lt;int&gt;, </span>
<span class="sd">        &quot;min_withdrawable&quot;: &lt;int&gt;, &quot;number&quot;: &lt;int&gt;,</span>
<span class="sd">        &quot;open_time&quot;: &lt;int&gt;, &quot;title&quot;: &lt;str&gt;, &quot;unique_hash&quot;: &lt;str&gt;, </span>
<span class="sd">        &quot;used&quot;: &lt;int&gt;, &quot;uses&quot;: &lt;int&gt;, &quot;usescsv&quot;: &lt;str&gt;, </span>
<span class="sd">        &quot;wait_time&quot;: &lt;int&gt;, &quot;wallet&quot;: &lt;str&gt; &quot;}</span>

<span class="sd">        Batch Print Page link: https://&lt;lnbits-url&gt;/withdraw/print/&lt;id&gt;</span>
<span class="sd">        Shareable link for single QR: https://&lt;lnbits-url&gt;/withdraw/&lt;id&gt;</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lnbits_url</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_upath</span>
            <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">post_url</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_admin_headers</span><span class="p">,</span> <span class="n">body</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">body</span><span class="p">))</span>
            <span class="k">return</span> <span class="n">res</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
            <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>


    <span class="c1"># Update a withdraw link </span>
    <span class="k">async</span> <span class="k">def</span> <span class="nf">update_withdrawlink</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">withdraw_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">body</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        PUT /withdraw/api/v1/links/&lt;pay_id&gt;</span>

<span class="sd">        Body (application/json)</span>
<span class="sd">        {&quot;title&quot;: &lt;string&gt;, &quot;min_withdrawable&quot;: &lt;integer&gt;, </span>
<span class="sd">        &quot;max_withdrawable&quot;: &lt;integer&gt;, &quot;uses&quot;: &lt;integer&gt;, </span>
<span class="sd">        &quot;wait_time&quot;: &lt;integer&gt;, &quot;is_unique&quot;: &lt;boolean&gt;}</span>

<span class="sd">        Returns Returns 200 OK app/json</span>
<span class="sd">        {&quot;lnurl&quot;: &lt;string&gt;}</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lnbits_url</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_upath</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="n">withdraw_id</span>
            <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">put_url</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_admin_headers</span><span class="p">,</span> <span class="n">body</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">body</span><span class="p">))</span>
            <span class="k">return</span> <span class="n">res</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">e</span>


    <span class="c1"># Delete a withdraw link </span>
    <span class="k">async</span> <span class="k">def</span> <span class="nf">delete_withdrawlink</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">withdraw_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        DELETE /withdraw/api/v1/links/&lt;withdraw_id&gt;</span>

<span class="sd">        Returns Returns 204 NO CONTENT</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lnbits_url</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_upath</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="n">withdraw_id</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
            <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">delete_url</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_admin_headers</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">res</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">e</span>


    <span class="k">async</span> <span class="k">def</span> <span class="nf">get_hash_check</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">hash</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">lnurl_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        GET /withdraw/api/v1/links/&lt;the_hash&gt;/&lt;lnurl_id&gt;</span>

<span class="sd">        Headers {&quot;X-Api-Key&quot;: &lt;invoice_key&gt;}</span>

<span class="sd">        Returns 201 CREATED (application/json)</span>
<span class="sd">        {&quot;status&quot;: &lt;bool&gt;}</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">upath</span> <span class="o">=</span> <span class="s2">&quot;/withdraw/api/v1/links/&quot;</span>
            <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lnbits_url</span> <span class="o">+</span> <span class="n">upath</span> <span class="o">+</span> <span class="nb">hash</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="n">lnurl_id</span>
            <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">get_url</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_invoice_headers</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">res</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">e</span>


    <span class="k">async</span> <span class="k">def</span> <span class="nf">get_image_embed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lnurl_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        GET /withdraw/img/&lt;lnurl_id&gt;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">upath</span> <span class="o">=</span> <span class="s2">&quot;/withdraw/img/&quot;</span>
            <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lnbits_url</span> <span class="o">+</span> <span class="n">upath</span> <span class="o">+</span> <span class="n">lnurl_id</span>
            <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">get_url_resp</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_invoice_headers</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">res</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">e</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">









<div class="doc doc-object doc-function">



<h3 id="pylnbits.lnurl_w.LnurlWithdraw.create_withdrawlink" class="doc doc-heading">
<code class="highlight language-python"><span class="n">create_withdrawlink</span><span class="p">(</span><span class="n">body</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>POST /withdraw/api/v1/links</p>
<p>Body (application/json)
{"title": <string>, "min_withdrawable": <integer>, 
"max_withdrawable": <integer>, "uses": <integer>,
"wait_time": <integer>, "is_unique": <boolean>}</p>
<p>Returns Returns 201 CREATED app/json
{"id": &lt; string&gt; , "is_unique": <boolean>, "k1": <str>, 
"lnurl": <string>, "max_withdrawable": <int>, 
"min_withdrawable": <int>, "number": <int>,
"open_time": <int>, "title": <str>, "unique_hash": <str>, 
"used": <int>, "uses": <int>, "usescsv": <str>, 
"wait_time": <int>, "wallet": <str> "}</p>
<p>Batch Print Page link: https://<lnbits-url>/withdraw/print/<id>
Shareable link for single QR: https://<lnbits-url>/withdraw/<id></p>

      <details class="quote">
        <summary>Source code in <code>pylnbits/lnurl_w.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span>
<span class="normal">97</span>
<span class="normal">98</span>
<span class="normal">99</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">create_withdrawlink</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">body</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    POST /withdraw/api/v1/links</span>

<span class="sd">    Body (application/json)</span>
<span class="sd">    {&quot;title&quot;: &lt;string&gt;, &quot;min_withdrawable&quot;: &lt;integer&gt;, </span>
<span class="sd">    &quot;max_withdrawable&quot;: &lt;integer&gt;, &quot;uses&quot;: &lt;integer&gt;,</span>
<span class="sd">    &quot;wait_time&quot;: &lt;integer&gt;, &quot;is_unique&quot;: &lt;boolean&gt;}</span>

<span class="sd">    Returns Returns 201 CREATED app/json</span>
<span class="sd">    {&quot;id&quot;: &lt; string&gt; , &quot;is_unique&quot;: &lt;boolean&gt;, &quot;k1&quot;: &lt;str&gt;, </span>
<span class="sd">    &quot;lnurl&quot;: &lt;string&gt;, &quot;max_withdrawable&quot;: &lt;int&gt;, </span>
<span class="sd">    &quot;min_withdrawable&quot;: &lt;int&gt;, &quot;number&quot;: &lt;int&gt;,</span>
<span class="sd">    &quot;open_time&quot;: &lt;int&gt;, &quot;title&quot;: &lt;str&gt;, &quot;unique_hash&quot;: &lt;str&gt;, </span>
<span class="sd">    &quot;used&quot;: &lt;int&gt;, &quot;uses&quot;: &lt;int&gt;, &quot;usescsv&quot;: &lt;str&gt;, </span>
<span class="sd">    &quot;wait_time&quot;: &lt;int&gt;, &quot;wallet&quot;: &lt;str&gt; &quot;}</span>

<span class="sd">    Batch Print Page link: https://&lt;lnbits-url&gt;/withdraw/print/&lt;id&gt;</span>
<span class="sd">    Shareable link for single QR: https://&lt;lnbits-url&gt;/withdraw/&lt;id&gt;</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lnbits_url</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_upath</span>
        <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">post_url</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_admin_headers</span><span class="p">,</span> <span class="n">body</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">body</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">res</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pylnbits.lnurl_w.LnurlWithdraw.delete_withdrawlink" class="doc doc-heading">
<code class="highlight language-python"><span class="n">delete_withdrawlink</span><span class="p">(</span><span class="n">withdraw_id</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>DELETE /withdraw/api/v1/links/<withdraw_id></p>
<p>Returns Returns 204 NO CONTENT</p>

      <details class="quote">
        <summary>Source code in <code>pylnbits/lnurl_w.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">delete_withdrawlink</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">withdraw_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    DELETE /withdraw/api/v1/links/&lt;withdraw_id&gt;</span>

<span class="sd">    Returns Returns 204 NO CONTENT</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lnbits_url</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_upath</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="n">withdraw_id</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
        <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">delete_url</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_admin_headers</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">res</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">e</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pylnbits.lnurl_w.LnurlWithdraw.get_hash_check" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_hash_check</span><span class="p">(</span><span class="nb">hash</span><span class="p">,</span> <span class="n">lnurl_id</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>GET /withdraw/api/v1/links/<the_hash>/<lnurl_id></p>
<p>Headers {"X-Api-Key": <invoice_key>}</p>
<p>Returns 201 CREATED (application/json)
{"status": <bool>}</p>

      <details class="quote">
        <summary>Source code in <code>pylnbits/lnurl_w.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_hash_check</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">hash</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">lnurl_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    GET /withdraw/api/v1/links/&lt;the_hash&gt;/&lt;lnurl_id&gt;</span>

<span class="sd">    Headers {&quot;X-Api-Key&quot;: &lt;invoice_key&gt;}</span>

<span class="sd">    Returns 201 CREATED (application/json)</span>
<span class="sd">    {&quot;status&quot;: &lt;bool&gt;}</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">upath</span> <span class="o">=</span> <span class="s2">&quot;/withdraw/api/v1/links/&quot;</span>
        <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lnbits_url</span> <span class="o">+</span> <span class="n">upath</span> <span class="o">+</span> <span class="nb">hash</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="n">lnurl_id</span>
        <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">get_url</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_invoice_headers</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">res</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">e</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pylnbits.lnurl_w.LnurlWithdraw.get_image_embed" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_image_embed</span><span class="p">(</span><span class="n">lnurl_id</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>GET /withdraw/img/<lnurl_id></p>

      <details class="quote">
        <summary>Source code in <code>pylnbits/lnurl_w.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_image_embed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lnurl_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    GET /withdraw/img/&lt;lnurl_id&gt;</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">upath</span> <span class="o">=</span> <span class="s2">&quot;/withdraw/img/&quot;</span>
        <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lnbits_url</span> <span class="o">+</span> <span class="n">upath</span> <span class="o">+</span> <span class="n">lnurl_id</span>
        <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">get_url_resp</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_invoice_headers</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">res</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">e</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pylnbits.lnurl_w.LnurlWithdraw.get_withdrawlink" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_withdrawlink</span><span class="p">(</span><span class="n">withdraw_id</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>GET /withdraw/api/v1/links/<pay_id>
Returns list pay links. Returns 200 OK app/json
{"lnurl": <string>}</p>

      <details class="quote">
        <summary>Source code in <code>pylnbits/lnurl_w.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_withdrawlink</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">withdraw_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    GET /withdraw/api/v1/links/&lt;pay_id&gt;</span>
<span class="sd">    Returns list pay links. Returns 200 OK app/json</span>
<span class="sd">    {&quot;lnurl&quot;: &lt;string&gt;}</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lnbits_url</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_upath</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="n">withdraw_id</span>
        <span class="c1"># print(f&quot;GET WITHDRAWL LINK PATH: {path}&quot;)</span>
        <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">get_url_resp</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_invoice_headers</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">res</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">e</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pylnbits.lnurl_w.LnurlWithdraw.list_withdrawlinks" class="doc doc-heading">
<code class="highlight language-python"><span class="n">list_withdrawlinks</span><span class="p">()</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>GET /withdraw/api/v1/links
Returns list withdraw links. Returns 200 OK app/json [<withdraw_link_object>, ...]</p>

      <details class="quote">
        <summary>Source code in <code>pylnbits/lnurl_w.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">list_withdrawlinks</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    GET /withdraw/api/v1/links</span>
<span class="sd">    Returns list withdraw links. Returns 200 OK app/json [&lt;withdraw_link_object&gt;, ...]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lnbits_url</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_upath</span>
        <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">get_url</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_invoice_headers</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">res</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">e</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pylnbits.lnurl_w.LnurlWithdraw.update_withdrawlink" class="doc doc-heading">
<code class="highlight language-python"><span class="n">update_withdrawlink</span><span class="p">(</span><span class="n">withdraw_id</span><span class="p">,</span> <span class="n">body</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>PUT /withdraw/api/v1/links/<pay_id></p>
<p>Body (application/json)
{"title": <string>, "min_withdrawable": <integer>, 
"max_withdrawable": <integer>, "uses": <integer>, 
"wait_time": <integer>, "is_unique": <boolean>}</p>
<p>Returns Returns 200 OK app/json
{"lnurl": <string>}</p>

      <details class="quote">
        <summary>Source code in <code>pylnbits/lnurl_w.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">update_withdrawlink</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">withdraw_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">body</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    PUT /withdraw/api/v1/links/&lt;pay_id&gt;</span>

<span class="sd">    Body (application/json)</span>
<span class="sd">    {&quot;title&quot;: &lt;string&gt;, &quot;min_withdrawable&quot;: &lt;integer&gt;, </span>
<span class="sd">    &quot;max_withdrawable&quot;: &lt;integer&gt;, &quot;uses&quot;: &lt;integer&gt;, </span>
<span class="sd">    &quot;wait_time&quot;: &lt;integer&gt;, &quot;is_unique&quot;: &lt;boolean&gt;}</span>

<span class="sd">    Returns Returns 200 OK app/json</span>
<span class="sd">    {&quot;lnurl&quot;: &lt;string&gt;}</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lnbits_url</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_upath</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="n">withdraw_id</span>
        <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">put_url</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_session</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_admin_headers</span><span class="p">,</span> <span class="n">body</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">body</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">res</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">e</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>




  </div>

  </div>

</div>

<div class="doc doc-object doc-module">


<a id="pylnbits.lndhub"></a>
  <div class="doc doc-contents first">
  
      <p>Rest API methods for LNbits LndHub Extension
Integrates with Blue Wallet, Zeus</p>

  

  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="pylnbits.lndhub.LndHub" class="doc doc-heading">
        <code>LndHub</code>


</h2>


  <div class="doc doc-contents ">



        <details class="quote">
          <summary>Source code in <code>pylnbits/lndhub.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">LndHub</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;__init__</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_invoice_key</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">in_key</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_admin_key</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">admin_key</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_lnbits_url</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">lnbits_url</span>

    <span class="k">def</span> <span class="nf">admin</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            create admin url for LNDHub</span>

<span class="sd">            Returns lndhub url</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;lndhub://admin:&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_admin_key</span> <span class="o">+</span> <span class="s2">&quot;@&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lnbits_url</span> <span class="o">+</span> <span class="s2">&quot;/lndhub/ext/&quot;</span>
        <span class="k">return</span> <span class="n">url</span>

    <span class="k">def</span> <span class="nf">invoice</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            create invoice url for LNDHub</span>

<span class="sd">            Returns lndhub url</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;lndhub://invoice:&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_invoice_key</span> <span class="o">+</span> <span class="s2">&quot;@&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lnbits_url</span> <span class="o">+</span> <span class="s2">&quot;/lndhub/ext/&quot;</span>
        <span class="k">return</span> <span class="n">url</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">









<div class="doc doc-object doc-function">



<h3 id="pylnbits.lndhub.LndHub.__init__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">config</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p><strong>init</strong></p>

      <details class="quote">
        <summary>Source code in <code>pylnbits/lndhub.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;__init__</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_invoice_key</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">in_key</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_admin_key</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">admin_key</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_lnbits_url</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">lnbits_url</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pylnbits.lndhub.LndHub.admin" class="doc doc-heading">
<code class="highlight language-python"><span class="n">admin</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>create admin url for LNDHub</p>
<p>Returns lndhub url</p>

      <details class="quote">
        <summary>Source code in <code>pylnbits/lndhub.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">admin</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        create admin url for LNDHub</span>

<span class="sd">        Returns lndhub url</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;lndhub://admin:&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_admin_key</span> <span class="o">+</span> <span class="s2">&quot;@&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lnbits_url</span> <span class="o">+</span> <span class="s2">&quot;/lndhub/ext/&quot;</span>
    <span class="k">return</span> <span class="n">url</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pylnbits.lndhub.LndHub.invoice" class="doc doc-heading">
<code class="highlight language-python"><span class="n">invoice</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>create invoice url for LNDHub</p>
<p>Returns lndhub url</p>

      <details class="quote">
        <summary>Source code in <code>pylnbits/lndhub.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">invoice</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        create invoice url for LNDHub</span>

<span class="sd">        Returns lndhub url</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;lndhub://invoice:&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_invoice_key</span> <span class="o">+</span> <span class="s2">&quot;@&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lnbits_url</span> <span class="o">+</span> <span class="s2">&quot;/lndhub/ext/&quot;</span>
    <span class="k">return</span> <span class="n">url</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>




  </div>

  </div>

</div><p>--</p>
<h2 id="project-layout">Project layout</h2>
<pre><code>mkdocs.yml    # The configuration file.
docs/
    index.md  # The documentation homepage.
    ...       # Other markdown pages, images and other files.
config_sample.yml
pylnbits/
    __init__.py
    config.py
    lndhub.py
    lnurl_p.py
    lnurl_w.py
    user_manager.py
    user_wallet.py
    utils.py
tests/
    __init__.py
    test_lndhub.py
    test_lnurlp.py
    test_lnurlw.py
    test_usermanager.py
    test_userwallet.py
</code></pre>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../how-to-guides/" class="btn btn-neutral float-left" title="How-To guides"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../explanation/" class="btn btn-neutral float-right" title="Explanation">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/lightningames/pylnbits" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
      <span><a href="../how-to-guides/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../explanation/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme_extra.js" defer></script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
